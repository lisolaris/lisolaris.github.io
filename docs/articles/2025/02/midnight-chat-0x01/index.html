<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>深夜闲谈 0x01 | lisolaris's blog</title>
<meta name=keywords content="2025-02,杂谈,深夜闲谈"><meta name=description content="0x01
之前创建这个博客的时候想的是当日记来写的，但是后来不知不觉就写成了某种教程集合……感觉不是很有用的东西就不想放上来了。最近又想起来写博客的目的，遂打算开始一个新的节分类专门放闲扯淡的内容。这一篇是第一篇，所以是0x01."><meta name=author content="lisolaris"><link rel=canonical href=https://blog.sorali.org/articles/2025/02/midnight-chat-0x01/><meta name=google-site-verification content="njbU0_AKubmw8PZ2_M8dRqYdxfHTDAJSiIIMg8183Gg"><meta name=msvalidate.01 content="2F130D8888E169C0FEDC8FD74C542EB9"><link crossorigin=anonymous href=../../../../assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://blog.sorali.org/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.sorali.org/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.sorali.org/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.sorali.org/apple-touch-icon.png><link rel=mask-icon href=https://blog.sorali.org/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.sorali.org/articles/2025/02/midnight-chat-0x01/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css integrity=sha384-zh0CIslj+VczCZtlzBcjt5ppRcsAmDnRem7ESsYwWwg3m/OaJ2l4x7YBZl9Kxxib crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js integrity=sha384-Rma6DA2IPUwhNxmrB/7S3Tno0YY7sFu9WSYMCuulLhIqYSGZ2gKCJWIqhBWqMQfh crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js integrity=sha384-hCXGrW6PitJEwbkoStFjeJxv+fSOOQKOPbJxSfM6G5sWZjAyWhXiTIIAmQqnlLlh crossorigin=anonymous onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script><link id=hljs-theme rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/atom-one-light.min.css crossorigin=anonymous referrerpolicy=no-referrer><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js integrity="sha512-EBLzUL8XLl+va/zAsmXwS7Z2B1F9HUHkZwyS/VKwh3S7T/U0nF4BaU29EP/ZSf6zgiIxYAnKLu6bJ8dqpmX5uw==" crossorigin=anonymous referrerpolicy=no-referrer></script><script>document.addEventListener("DOMContentLoaded",function(){hljs.highlightAll();const e=new MutationObserver(e=>{e.forEach(e=>{if(e.attributeName==="class")for(let t of document.getElementsByTagName("pre")){let e=t.querySelector("code");e.classList.remove("hljs"),e.removeAttribute("data-highlighted")}document.body.classList.contains("dark")?document.getElementById("hljs-theme").href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/atom-one-dark.min.css":document.getElementById("hljs-theme").href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/atom-one-light.min.css",hljs.highlightAll()})});e.observe(document.body,{attributes:!0,attributeFilter:["class"]})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-WJLMR8Z8YH"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-WJLMR8Z8YH")}</script><meta property="og:url" content="https://blog.sorali.org/articles/2025/02/midnight-chat-0x01/"><meta property="og:site_name" content="lisolaris's blog"><meta property="og:title" content="深夜闲谈 0x01"><meta property="og:description" content="0x01 之前创建这个博客的时候想的是当日记来写的，但是后来不知不觉就写成了某种教程集合……感觉不是很有用的东西就不想放上来了。最近又想起来写博客的目的，遂打算开始一个新的节分类专门放闲扯淡的内容。这一篇是第一篇，所以是0x01."><meta property="og:locale" content="zh-CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-02-18T02:06:51+08:00"><meta property="article:modified_time" content="2025-02-18T02:06:51+08:00"><meta property="article:tag" content="2025-02"><meta property="article:tag" content="杂谈"><meta property="article:tag" content="深夜闲谈"><meta property="og:image" content="https://s.gravatar.com/avatar/ca6b899274fa556db7e5cf9c54325448"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://s.gravatar.com/avatar/ca6b899274fa556db7e5cf9c54325448"><meta name=twitter:title content="深夜闲谈 0x01"><meta name=twitter:description content="0x01
之前创建这个博客的时候想的是当日记来写的，但是后来不知不觉就写成了某种教程集合……感觉不是很有用的东西就不想放上来了。最近又想起来写博客的目的，遂打算开始一个新的节分类专门放闲扯淡的内容。这一篇是第一篇，所以是0x01."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"深夜闲谈 0x01","item":"https://blog.sorali.org/articles/2025/02/midnight-chat-0x01/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"深夜闲谈 0x01","name":"深夜闲谈 0x01","description":"0x01 之前创建这个博客的时候想的是当日记来写的，但是后来不知不觉就写成了某种教程集合……感觉不是很有用的东西就不想放上来了。最近又想起来写博客的目的，遂打算开始一个新的节分类专门放闲扯淡的内容。这一篇是第一篇，所以是0x01.\n","keywords":["2025-02","杂谈","深夜闲谈"],"articleBody":"0x01 之前创建这个博客的时候想的是当日记来写的，但是后来不知不觉就写成了某种教程集合……感觉不是很有用的东西就不想放上来了。最近又想起来写博客的目的，遂打算开始一个新的节分类专门放闲扯淡的内容。这一篇是第一篇，所以是0x01.\n吃完夜宵肚子太饱睡不着来写博客\n在PaperMod主题中显示图片的题注 刚刚研究了要怎么在保持当前这个PaperMod主题不变的情况下让帖子中的各个图片的题注（caption）显示出来。之前我一直用的是Markdown的图片语法![caption](link)，本来以为这个图片的题注是由配置文件中某个项决定的，查了一圈并没有；退而求其次先研究居中，对照浏览器开发者工具的样式表详情仔细检查PaperMod的模板代码，注意到assets\\css\\common\\post-single.css里有一部分与图片格式有关：\n.post-content img { border-radius: 4px; margin: 1rem 0; } .post-content img[src*=\"#center\"] { margin: 1rem auto; } 往下一滑，发现了和caption有关的一部分样式：\n.post-content figure \u003e figcaption { color: var(--primary); font-size: 16px; font-weight: bold; margin: 8px 0 16px; } .post-content figure \u003e figcaption \u003e p { color: var(--secondary); font-size: 14px; font-weight: normal; } 于是去搜了下怎么用这个figure，在PaperMod的一篇FAQ里找到如何将图片居中的方式；另外这里还提到了怎么把figure设置成居中，并指向Hugo官方的一个FAQ页面。Hugo给出在Markdown帖子中应该这样写：\n{{}} Hugo会把这部分渲染成如下的HTML代码：\nZion National Park\n这样就能显示出来一幅像下面这样可以点击并且带有题注的图片了：\nZion National Park\n讨厌的是VSCode会把上面link后面的链接标黄提示不符合Markdown语法，之后研究下能不能自定义格式。\n将已有的帖子中的Markdown图片语法转换为Hugo figure语法 前面提到我之前的帖子里用的都是Markdown的图片语法。一个一个手动编辑显然太麻烦，能不能用程序替换，或者退而求其次用手动搜索-替换来实现呢？当然是可以的。回忆一下正则表达式语法，显然有一个子匹配的功能可以实现把形如\n![微信小程序 HAM模拟考试](https://z4a.net/images/2024/12/27/44cb47a7b13894a7d2846d05cd761cd5.png) 替换成\n{{}} 的功能。\n正则表达式的子匹配语法将表达式本身作为一个匹配，并且每个括号里的内容视作一个子匹配，在支持的编辑器（比如Notepad++、KDE Kate，顺带一提我不喜欢npp作者喜欢大放厥词的性格，现在已经卸载转向性能稍微差一些的Kate了）可以用\\0取得表达式的完整匹配，\\1取得第一个括号对应的子匹配，以此类推。\n在VSCode中子匹配不是用\\0 \\1这样的语法，而是$0 $1，比如下面：\n^!\\[(.+)\\]\\((.+)(#center)?\\) { {\u003c figure\\n src=\"$2\"\\n caption=\"$1\"\\n align=center\\n\u003e}} $2对应第二个(.+)匹配到的图片URL，$1对应第一个(.+)匹配到的图片题注，\\n用来换行，这样就能把Markdown图片语法转成Hugo支持的HTML标签嵌入语法了。\n改变PaperMod主题的正文宽度 顺便还改了一下主题中用来规定正文宽度的样式，在themes\\PaperMod\\assets\\css\\core\\theme-vars.css这个表里：\n:root { --main-width: 1024px; } 把--main-width从720px改成了1024px，宽一些更容易看了。\n使用git submodule管理和更新主题 但是我刚刚注意到可能是由于这个主题是我在创建时直接用git submodule从PaperMod的仓库里拉取下来的，在commit完push上去之后GitHub似乎会自动尝试向PaperMod的主仓库push我的修改？还是因为刚刚不小心在VSCode里点到了checkout的原因，总之Github Pages的自动部署报错：\nRun actions/checkout@v4 Syncing repository: lisolaris/lisolaris.github.io Getting Git version info Temporarily overriding HOME='/home/runner/work/_temp/be930d38-359c-4a0e-9514-fcfb6eb17a29' before making global git config changes Adding repository directory to the temporary git global config as a safe directory /usr/bin/git config --global --add safe.directory /home/runner/work/lisolaris.github.io/lisolaris.github.io Deleting the contents of '/home/runner/work/lisolaris.github.io/lisolaris.github.io' Initializing the repository Disabling automatic garbage collection Setting up auth Fetching the repository Determining the checkout info /usr/bin/git sparse-checkout disable /usr/bin/git config --local --unset-all extensions.worktreeConfig Checking out the ref Setting up auth for fetching submodules Fetching submodules /usr/bin/git submodule sync --recursive /usr/bin/git -c protocol.version=2 submodule update --init --force --depth=1 --recursive Submodule 'themes/PaperMod' (https://github.com/adityatelange/hugo-PaperMod.git) registered for path 'themes/PaperMod' Cloning into '/home/runner/work/lisolaris.github.io/lisolaris.github.io/themes/PaperMod'... Error: fatal: remote error: upload-pack: not our ref 1f90601ef287fd16dd7290695128e946e2aae293 Error: fatal: Fetched in submodule path 'themes/PaperMod', but it did not contain 1f90601ef287fd16dd7290695128e946e2aae293. Direct fetching of that commit failed. Error: The process '/usr/bin/git' failed with exit code 128 感觉是因为我错误执行git checkout导致的。如果不行的话估计得删掉重新从PaperMod的仓库里导入一次了……\n讲到这个，之后还打算把博客从Github Pages迁移到Cloudflare Pages上。在国内访问的话不施魔法似乎CF的更有可能直连上；之前尝试过在CF上部署一个静态网页用来给玩MC的群友提供白名单自助注册功能，效果还不错，而且Cloudflare Pages似乎也支持自动跟踪Github仓库的更新来刷新页面。明天试试看。\n现在打算把这篇文章push进仓库，看看Github Pages还能不能正常部署；不行的话真得改bug了。\n最近还买了张30HX矿卡，动手补上电容现在正常使用中。过程和之前的折腾内容准备补充进前两天新建的那个空帖子里。但现在得先把这个Pages不能部署的问题解决一下（\n刚刚试图渲染站点的时候Hugo还报错\n深夜闲谈01.md:1:1\": got named parameter 'src'. Cannot mix named and positional parameters\n但是又不说对行号我怎么排查问题==\nGoogle一圈都没有和我这个症状一样的问答，想着可能是Hugo版本太老有bug（这时我还用的0.111.2）；在Hugo的Github上找到了最新的release 0.144，两小时前刚发布。现在虽然还是报错但是能正常显示行号了：\nError: error building site: process: readAndProcessContent: \"深夜闲谈0x01.md:111:17\": got named parameter 'src'. Cannot mix named and positional parameters\n都把出问题的这一句包裹在代码块里了还尝试着去渲染吗……使用暴力手段（加一个空格破坏shortcode语法），问题解决。\n2025年3月19日：发现Hugo其实提供了让shortcode不被自动匹配的方法，只要将{{\u003c \u003e}}中的内容用/**/包围起来就可以了。\n再次尝试渲染，又报错：\nERROR deprecated: .Site.Social was deprecated in Hugo v0.124.0 and subsequently removed. Implement taxonomy 'social' or use .Site.Params.Social instead.\n这次是模板问题。但我刚刚又在子仓库中执行了git checkout，陷入了git的陷阱\n好在问过ChatGPT后说可以很简单地重置子仓库到初始状态：\ngit submodule update --init --recursive 然后就能让子仓库和其远程仓库同步了：\ngit submodule update --remote PaperMod肯定会跟进Hugo的更新，就不用我自己一个一个地方检查哪里不符合新的语法再去改了，问题解决。\n解决这个问题后Hugo又报错：\nERROR deprecated: .Site.Social was deprecated in Hugo v0.124.0 and subsequently removed. Implement taxonomy 'social' or use .Site.Params.Social instead.\n这次是config.yml中的问题，查阅最新的Hugo文档中有关如何分页的部分修改配置文件，问题解决。\n最后push到远程仓库上，Github自动部署成功，问题圆满解决！\n","wordCount":"2717","inLanguage":"en","image":"https://s.gravatar.com/avatar/ca6b899274fa556db7e5cf9c54325448","datePublished":"2025-02-18T02:06:51+08:00","dateModified":"2025-02-18T02:06:51+08:00","author":{"@type":"Person","name":"lisolaris"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.sorali.org/articles/2025/02/midnight-chat-0x01/"},"publisher":{"@type":"Organization","name":"lisolaris's blog","logo":{"@type":"ImageObject","url":"https://blog.sorali.org/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.sorali.org/ accesskey=h title="Home (Alt + H)">Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.sorali.org/categories/ title=目录><span>目录</span></a></li><li><a href=https://blog.sorali.org/tags/ title=标签><span>标签</span></a></li><li><a href=https://blog.sorali.org/posts/helloworld/ title=关于><span>关于</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.sorali.org/>Home</a></div><h1 class="post-title entry-hint-parent">深夜闲谈 0x01</h1><div class=post-meta><span title='2025-02-18 02:06:51 +0800 CST'>February 18, 2025</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;2717 words&nbsp;·&nbsp;lisolaris&nbsp;|&nbsp;<a href=https://github.com/lisolaris/lisolaris.github.io/issues/new rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#0x01 aria-label=0x01>0x01</a></li><li><a href=#%e5%9c%a8papermod%e4%b8%bb%e9%a2%98%e4%b8%ad%e6%98%be%e7%a4%ba%e5%9b%be%e7%89%87%e7%9a%84%e9%a2%98%e6%b3%a8 aria-label=在PaperMod主题中显示图片的题注>在PaperMod主题中显示图片的题注</a></li><li><a href=#%e5%b0%86%e5%b7%b2%e6%9c%89%e7%9a%84%e5%b8%96%e5%ad%90%e4%b8%ad%e7%9a%84markdown%e5%9b%be%e7%89%87%e8%af%ad%e6%b3%95%e8%bd%ac%e6%8d%a2%e4%b8%bahugo-figure%e8%af%ad%e6%b3%95 aria-label="将已有的帖子中的Markdown图片语法转换为Hugo figure语法">将已有的帖子中的Markdown图片语法转换为Hugo figure语法</a></li><li><a href=#%e6%94%b9%e5%8f%98papermod%e4%b8%bb%e9%a2%98%e7%9a%84%e6%ad%a3%e6%96%87%e5%ae%bd%e5%ba%a6 aria-label=改变PaperMod主题的正文宽度>改变PaperMod主题的正文宽度</a></li><li><a href=#%e4%bd%bf%e7%94%a8git-submodule%e7%ae%a1%e7%90%86%e5%92%8c%e6%9b%b4%e6%96%b0%e4%b8%bb%e9%a2%98 aria-label="使用git submodule管理和更新主题">使用git submodule管理和更新主题</a></li></ul></div></details></div><div class=post-content><h3 id=0x01>0x01<a hidden class=anchor aria-hidden=true href=#0x01>#</a></h3><p>之前创建这个博客的时候想的是当日记来写的，但是后来不知不觉就写成了某种教程集合……感觉不是很有用的东西就不想放上来了。最近又想起来写博客的目的，遂打算开始一个新的节分类专门放闲扯淡的内容。这一篇是第一篇，所以是0x01.</p><p><del>吃完夜宵肚子太饱睡不着来写博客</del></p><hr><h3 id=在papermod主题中显示图片的题注>在PaperMod主题中显示图片的题注<a hidden class=anchor aria-hidden=true href=#在papermod主题中显示图片的题注>#</a></h3><p>刚刚研究了要怎么在保持当前这个PaperMod主题不变的情况下让帖子中的各个图片的题注（caption）显示出来。之前我一直用的是Markdown的图片语法<code>![caption](link)</code>，本来以为这个图片的题注是由配置文件中某个项决定的，查了一圈并没有；退而求其次先研究居中，对照浏览器开发者工具的样式表详情仔细检查PaperMod的模板代码，注意到<code>assets\css\common\post-single.css</code>里有一部分与图片格式有关：</p><pre><code class=language-css>.post-content img {
    border-radius: 4px;
    margin: 1rem 0;
}

.post-content img[src*=&quot;#center&quot;] {
    margin: 1rem auto;
}
</code></pre><p>往下一滑，发现了和caption有关的一部分样式：</p><pre><code class=language-css>.post-content figure &gt; figcaption {
    color: var(--primary);
    font-size: 16px;
    font-weight: bold;
    margin: 8px 0 16px;
}

.post-content figure &gt; figcaption &gt; p {
    color: var(--secondary);
    font-size: 14px;
    font-weight: normal;
}
</code></pre><p>于是去搜了下怎么用这个figure，在PaperMod的一篇<a href=https://adityatelange.github.io/hugo-PaperMod/posts/papermod/papermod-faq/#centering-image-in-markdown>FAQ</a>里找到如何将图片居中的方式；另外这里还提到了怎么把figure设置成居中，并指向Hugo官方的一个<a href=https://gohugo.io/shortcodes/figure/>FAQ</a>页面。Hugo给出在Markdown帖子中应该这样写：</p><pre><code class=language-txt>{{&lt;figure
  src=&quot;/images/examples/zion-national-park.jpg&quot;
  alt=&quot;A photograph of Zion National Park&quot;
  link=&quot;https://www.nps.gov/zion/index.htm&quot;
  caption=&quot;Zion National Park&quot;
  class=&quot;ma0 w-75&quot;
&gt;}}
</code></pre><p>Hugo会把这部分渲染成如下的HTML代码：</p><pre><code class=language-html>&lt;figure class=&quot;ma0 w-75&quot;&gt;
  &lt;a href=&quot;https://www.nps.gov/zion/index.htm&quot;&gt;
    &lt;img 
      src=&quot;/images/examples/zion-national-park.jpg&quot; 
      alt=&quot;A photograph of Zion National Park&quot;
    &gt;
  &lt;/a&gt;
  &lt;figcaption&gt;
    &lt;p&gt;Zion National Park&lt;/p&gt;
  &lt;/figcaption&gt;
&lt;/figure&gt;
</code></pre><p>这样就能显示出来一幅像下面这样可以点击并且带有题注的图片了：</p><figure class="ma0 w-75"><a href=https://www.nps.gov/zion/index.htm><img loading=lazy src=https://gohugo.io/images/examples/zion-national-park.jpg alt="A photograph of Zion National Park"></a><figcaption><p>Zion National Park</p></figcaption></figure><p>讨厌的是VSCode会把上面<code>link</code>后面的链接标黄提示不符合Markdown语法，之后研究下能不能自定义格式。</p><hr><h3 id=将已有的帖子中的markdown图片语法转换为hugo-figure语法>将已有的帖子中的Markdown图片语法转换为Hugo figure语法<a hidden class=anchor aria-hidden=true href=#将已有的帖子中的markdown图片语法转换为hugo-figure语法>#</a></h3><p>前面提到我之前的帖子里用的都是Markdown的图片语法。一个一个手动编辑显然太麻烦，能不能用程序替换，或者退而求其次用手动搜索-替换来实现呢？当然是可以的。回忆一下正则表达式语法，显然有一个子匹配的功能可以实现把形如</p><pre><code class=language-markdown>![微信小程序 HAM模拟考试](https://z4a.net/images/2024/12/27/44cb47a7b13894a7d2846d05cd761cd5.png)
</code></pre><p>替换成</p><pre><code class=language-txt>{{&lt;figure
    src=&quot;https://z4a.net/images/2024/12/27/44cb47a7b13894a7d2846d05cd761cd5.png&quot;
    caption=&quot;微信小程序 HAM模拟考试&quot;
    align=center
&gt;}}
</code></pre><p>的功能。</p><p>正则表达式的子匹配语法将表达式本身作为一个匹配，并且每个括号里的内容视作一个子匹配，在支持的编辑器（比如Notepad++、KDE Kate，顺带一提我不喜欢npp作者喜欢大放厥词的性格，现在已经卸载转向性能稍微差一些的Kate了）可以用<code>\0</code>取得表达式的完整匹配，<code>\1</code>取得第一个括号对应的子匹配，以此类推。</p><p>在VSCode中子匹配不是用<code>\0</code> <code>\1</code>这样的语法，而是<code>$0</code> <code>$1</code>，比如下面：</p><pre><code class=language-regex>^!\[(.+)\]\((.+)(#center)?\)
</code></pre><pre><code class=language-txt>{ {&lt; figure\n    src=&quot;$2&quot;\n    caption=&quot;$1&quot;\n    align=center\n&gt;}}
</code></pre><p><code>$2</code>对应第二个<code>(.+)</code>匹配到的图片URL，<code>$1</code>对应第一个<code>(.+)</code>匹配到的图片题注，<code>\n</code>用来换行，这样就能把Markdown图片语法转成Hugo支持的HTML标签嵌入语法了。</p><hr><h3 id=改变papermod主题的正文宽度>改变PaperMod主题的正文宽度<a hidden class=anchor aria-hidden=true href=#改变papermod主题的正文宽度>#</a></h3><p>顺便还改了一下主题中用来规定正文宽度的样式，在themes\PaperMod\assets\css\core\theme-vars.css这个表里：</p><pre><code class=language-css>:root {
    --main-width: 1024px;
}
</code></pre><p>把<code>--main-width</code>从720px改成了1024px，宽一些更容易看了。</p><hr><h3 id=使用git-submodule管理和更新主题>使用git submodule管理和更新主题<a hidden class=anchor aria-hidden=true href=#使用git-submodule管理和更新主题>#</a></h3><p>但是我刚刚注意到可能是由于这个主题是我在创建时直接用<code>git submodule</code>从PaperMod的仓库里拉取下来的，在commit完push上去之后GitHub似乎会自动尝试向PaperMod的主仓库push我的修改？还是因为刚刚不小心在VSCode里点到了checkout的原因，总之Github Pages的自动部署报错：</p><pre><code class=language-log>Run actions/checkout@v4
Syncing repository: lisolaris/lisolaris.github.io
Getting Git version info
Temporarily overriding HOME='/home/runner/work/_temp/be930d38-359c-4a0e-9514-fcfb6eb17a29' before making global git config changes
Adding repository directory to the temporary git global config as a safe directory
/usr/bin/git config --global --add safe.directory /home/runner/work/lisolaris.github.io/lisolaris.github.io
Deleting the contents of '/home/runner/work/lisolaris.github.io/lisolaris.github.io'
Initializing the repository
Disabling automatic garbage collection
Setting up auth
Fetching the repository
Determining the checkout info
/usr/bin/git sparse-checkout disable
/usr/bin/git config --local --unset-all extensions.worktreeConfig
Checking out the ref
Setting up auth for fetching submodules
Fetching submodules
  /usr/bin/git submodule sync --recursive
  /usr/bin/git -c protocol.version=2 submodule update --init --force --depth=1 --recursive
  Submodule 'themes/PaperMod' (https://github.com/adityatelange/hugo-PaperMod.git) registered for path 'themes/PaperMod'
  Cloning into '/home/runner/work/lisolaris.github.io/lisolaris.github.io/themes/PaperMod'...
  Error: fatal: remote error: upload-pack: not our ref 1f90601ef287fd16dd7290695128e946e2aae293
  Error: fatal: Fetched in submodule path 'themes/PaperMod', but it did not contain 1f90601ef287fd16dd7290695128e946e2aae293. Direct fetching of that commit failed.
  Error: The process '/usr/bin/git' failed with exit code 128
</code></pre><p>感觉是因为我错误执行git checkout导致的。如果不行的话估计得删掉重新从PaperMod的仓库里导入一次了……</p><hr><p>讲到这个，之后还打算把博客从Github Pages迁移到Cloudflare Pages上。在国内访问的话不施魔法似乎CF的更有可能直连上；之前尝试过在CF上部署一个静态网页用来给玩MC的群友提供白名单自助注册功能，效果还不错，而且Cloudflare Pages似乎也支持自动跟踪Github仓库的更新来刷新页面。明天试试看。</p><p>现在打算把这篇文章push进仓库，看看Github Pages还能不能正常部署；不行的话真得改bug了。</p><hr><p>最近还买了张30HX矿卡，动手补上电容现在正常使用中。过程和之前的折腾内容准备补充进前两天新建的那个空帖子里。但现在得先把这个Pages不能部署的问题解决一下（</p><hr><p>刚刚试图渲染站点的时候Hugo还报错</p><p><code>深夜闲谈01.md:1:1": got named parameter 'src'. Cannot mix named and positional parameters</code></p><p>但是又不说对行号我怎么排查问题==</p><p>Google一圈都没有和我这个症状一样的问答，想着可能是Hugo版本太老有bug（这时我还用的0.111.2）；在Hugo的Github上找到了最新的release 0.144，两小时前刚发布。现在虽然还是报错但是能正常显示行号了：</p><p><code>Error: error building site: process: readAndProcessContent: "深夜闲谈0x01.md:111:17": got named parameter 'src'. Cannot mix named and positional parameters</code></p><p>都把出问题的这一句包裹在代码块里了还尝试着去渲染吗……使用暴力手段（加一个空格破坏shortcode语法），问题解决。</p><p><strong>2025年3月19日：发现Hugo其实提供了让shortcode不被自动匹配的方法，只要将<code>{{&lt; >}}</code>中的内容用<code>/**/</code>包围起来就可以了。</strong></p><hr><p>再次尝试渲染，又报错：</p><p><code>ERROR deprecated: .Site.Social was deprecated in Hugo v0.124.0 and subsequently removed. Implement taxonomy 'social' or use .Site.Params.Social instead.</code></p><p>这次是模板问题。但我刚刚又在子仓库中执行了<code>git checkout</code>，<del>陷入了git的陷阱</del></p><p>好在问过ChatGPT后说可以很简单地重置子仓库到初始状态：</p><pre><code class=language-sh>git submodule update --init --recursive
</code></pre><p>然后就能让子仓库和其远程仓库同步了：</p><pre><code class=language-sh>git submodule update --remote
</code></pre><p>PaperMod肯定会跟进Hugo的更新，就不用我自己一个一个地方检查哪里不符合新的语法再去改了，问题解决。</p><hr><p>解决这个问题后Hugo又报错：</p><p><code>ERROR deprecated: .Site.Social was deprecated in Hugo v0.124.0 and subsequently removed. Implement taxonomy 'social' or use .Site.Params.Social instead.</code></p><p>这次是<code>config.yml</code>中的问题，查阅最新的Hugo文档中有关<a href=https://gohugo.io/templates/pagination/>如何分页</a>的部分修改配置文件，问题解决。</p><hr><p>最后push到远程仓库上，Github自动部署成功，问题圆满解决！</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.sorali.org/tags/2025-02/>2025-02</a></li><li><a href=https://blog.sorali.org/tags/%E6%9D%82%E8%B0%88/>杂谈</a></li><li><a href=https://blog.sorali.org/tags/%E6%B7%B1%E5%A4%9C%E9%97%B2%E8%B0%88/>深夜闲谈</a></li></ul><nav class=paginav><a class=prev href=https://blog.sorali.org/articles/2025/03/control-theory-review-01/><span class=title>« Prev</span><br><span>自动控制原理 - 01 - 一般概念，数学模型与拉普拉斯变换</span>
</a><a class=next href=https://blog.sorali.org/articles/2025/02/nvidia-mining-card/><span class=title>Next »</span><br><span>NVIDIA矿卡折腾记</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://blog.sorali.org/>lisolaris's blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>
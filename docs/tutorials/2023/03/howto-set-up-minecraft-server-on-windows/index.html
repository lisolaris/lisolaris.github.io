<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>教程：如何在Windows机器上架设Minecraft服务器 | lisolaris's blog</title>
<meta name=keywords content="2023-03,教程,Minecraft"><meta name=description content="本篇是应群友需求，来介绍一下如何在Windows机器上启动Minecraft服务端供内网用户游玩，以使用服务端上才能运行的插件之类的。关于如何让别人远程连接到你的服务器，可以参见下一篇教程：如何在服务器上使用内网穿透
。"><meta name=author content="lisolaris"><link rel=canonical href=https://blog.sorali.org/tutorials/2023/03/howto-set-up-minecraft-server-on-windows/><meta name=google-site-verification content="njbU0_AKubmw8PZ2_M8dRqYdxfHTDAJSiIIMg8183Gg"><meta name=msvalidate.01 content="2F130D8888E169C0FEDC8FD74C542EB9"><link crossorigin=anonymous href=../../../../assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://blog.sorali.org/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.sorali.org/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.sorali.org/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.sorali.org/apple-touch-icon.png><link rel=mask-icon href=https://blog.sorali.org/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.sorali.org/tutorials/2023/03/howto-set-up-minecraft-server-on-windows/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css integrity="sha512-fHwaWebuwA7NSF5Qg/af4UeDx9XqUpYpOGgubo3yWu+b2IQR4UeQwbb42Ti7gVAjNtVoI/I9TEoYeu9omwcC6g==" crossorigin=anonymous referrerpolicy=no-referrer><script defer src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.js integrity="sha512-LQNxIMR5rXv7o+b1l8+N1EZMfhG7iFZ9HhnbJkTp4zjNr5Wvst75AqUeFDxeRUa7l5vEDyUiAip//r+EFLLCyA==" crossorigin=anonymous referrerpolicy=no-referrer></script><script defer src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/contrib/auto-render.min.js integrity="sha512-iWiuBS5nt6r60fCz26Nd0Zqe0nbk1ZTIQbl3Kv7kYsX+yKMUFHzjaH2+AnM6vp2Xs+gNmaBAVWJjSmuPw76Efg==" crossorigin=anonymous referrerpolicy=no-referrer onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script><link id=hljs-theme rel=stylesheet href><script defer src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js integrity="sha512-EBLzUL8XLl+va/zAsmXwS7Z2B1F9HUHkZwyS/VKwh3S7T/U0nF4BaU29EP/ZSf6zgiIxYAnKLu6bJ8dqpmX5uw==" crossorigin=anonymous referrerpolicy=no-referrer></script><script>document.addEventListener("DOMContentLoaded",function(){function e(){for(let e of document.getElementsByTagName("pre"))e.querySelector("code").classList.remove("hljs"),e.querySelector("code").removeAttribute("data-highlighted");let e=document.body.classList.contains("dark")?"dark":"light";document.getElementById("hljs-theme").href=`https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/atom-one-${e}.min.css`,hljs.highlightAll()}e();const t=new MutationObserver(t=>{t.forEach(t=>{t.attributeName==="class"&&e()})});t.observe(document.body,{attributes:!0,attributeFilter:["class"]})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-WJLMR8Z8YH"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-WJLMR8Z8YH")}</script><meta property="og:url" content="https://blog.sorali.org/tutorials/2023/03/howto-set-up-minecraft-server-on-windows/"><meta property="og:site_name" content="lisolaris's blog"><meta property="og:title" content="教程：如何在Windows机器上架设Minecraft服务器"><meta property="og:description" content="本篇是应群友需求，来介绍一下如何在Windows机器上启动Minecraft服务端供内网用户游玩，以使用服务端上才能运行的插件之类的。关于如何让别人远程连接到你的服务器，可以参见下一篇教程：如何在服务器上使用内网穿透 。"><meta property="og:locale" content="zh-CN"><meta property="og:type" content="article"><meta property="article:section" content="tutorials"><meta property="article:published_time" content="2023-03-14T12:53:17+08:00"><meta property="article:modified_time" content="2023-03-14T12:53:17+08:00"><meta property="article:tag" content="2023-03"><meta property="article:tag" content="教程"><meta property="article:tag" content="Minecraft"><meta property="og:image" content="https://s.gravatar.com/avatar/ca6b899274fa556db7e5cf9c54325448"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://s.gravatar.com/avatar/ca6b899274fa556db7e5cf9c54325448"><meta name=twitter:title content="教程：如何在Windows机器上架设Minecraft服务器"><meta name=twitter:description content="本篇是应群友需求，来介绍一下如何在Windows机器上启动Minecraft服务端供内网用户游玩，以使用服务端上才能运行的插件之类的。关于如何让别人远程连接到你的服务器，可以参见下一篇教程：如何在服务器上使用内网穿透
。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Tutorials","item":"https://blog.sorali.org/tutorials/"},{"@type":"ListItem","position":2,"name":"教程：如何在Windows机器上架设Minecraft服务器","item":"https://blog.sorali.org/tutorials/2023/03/howto-set-up-minecraft-server-on-windows/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"教程：如何在Windows机器上架设Minecraft服务器","name":"教程：如何在Windows机器上架设Minecraft服务器","description":"本篇是应群友需求，来介绍一下如何在Windows机器上启动Minecraft服务端供内网用户游玩，以使用服务端上才能运行的插件之类的。关于如何让别人远程连接到你的服务器，可以参见下一篇教程：如何在服务器上使用内网穿透 。\n","keywords":["2023-03","教程","Minecraft"],"articleBody":"本篇是应群友需求，来介绍一下如何在Windows机器上启动Minecraft服务端供内网用户游玩，以使用服务端上才能运行的插件之类的。关于如何让别人远程连接到你的服务器，可以参见下一篇教程：如何在服务器上使用内网穿透 。\n准备工作 首先呢我们需要准备一个服务端，这里选用PaperMC，访问官网后点进右上角Downloads按需下载版本就行了。下载后得到的一个jar文件，先放着。\n下载PaperMC服务端\nPaperMC属于Bukkit系的服务端，兼容大部分Bukkit和Spigot的插件，同时应用了许多针对原版的优化，令其运行速度大大快于原版vanilla；但代价就是许多原版的bug特性在Paper端不再可用，需要在高级配置中开启或是安装额外的插件（比如用于造刷沙机的跨世界实体方块更新逻辑在Paper端就需要安装这个插件）。\n需要注意的是官网首页的版本是跟进到最新稳定版的，比如目前是1.19.3，那么1.19.2等不再支持的客户端需要一直往下滑点击More才能看到。此外，更旧的不再支持的大版本服务端（如1.18.2及更早）被归在Legacy里面，点进去后会提示这些版本不再受支持，你提出的任何bug都不会修补云云。\n为了让游戏运行起来，我们还需要Java运行环境。你可以下载OpenJDK或是Oracle JDK，二者的区别在开源与否。\n此外，从Minecraft 1.17开始，Mojang就要求玩家使用16及更高版本的JRE，因此我推荐你下载最新的JDK。从我个人的使用体验而言，OpenJDK和Oracle JDK并没有察觉到明显的差异，下载哪个都无所谓了……不过我推荐下载zip打包的JDK，可以省去配置环境变量这一步，后续要升级也很方便。\nOpenJDK Windows版下载\n让服务器跑起来 准备好文件 现在我们就有了一个.zip的JDK压缩包，一个.jar的Java软件包。我们找个文件夹把它们装起来，解压JDK，看起来像是这样的：\n文件列表\n打开得到的jdk文件夹，进入bin目录内，找到java.exe，按住Shift的同时右键它，在弹出的菜单中选择『复制文件地址』：\n复制文件地址\n如果想运行安装了Forge或者Fabric的Mod服务器，之后我有空会再补充的。这里先介绍原版。\n启动脚本 回到刚刚的目录，新建一个文本文档，填入刚刚复制的java.exe的文件地址，在后面加入参数-Xmx\u003c最大限制内存\u003eM -Xms\u003c最小分配内存\u003eM -Dfile.encoding=utf-8 -Dnative.encoding=utf-8 -jar \u003c服务端文件路径\u003e，比如像这样：\nchcp 65001 ipconfig /all \"D:\\MinecraftServer\\jdk-19.0.2\\bin\\java.exe\" -Xmx4096M -Xms768M -Dfile.encoding=utf-8 -Dnative.encoding=utf-8 -jar \"D:\\MinecraftServer\\paper-1.19.3-448.jar\" pause 解释一下：\n最大限制内存：允许Java虚拟机使用的最大的内存，可以理解为服务端使用的最大内存量。应当按照你电脑拥有的实际内存来设置。一般有16G内存的电脑，和三五个好友一起玩设置为4096(4GB)已经够用了，人数更多可酌情调整，但也需要更强的CPU性能。 最小分配内存：至少给Java虚拟机分配这么多内存，合理小于最大限制就可以了。 服务端文件路径：可以用和复制java.exe的文件路径相同的方法得到，粘贴进去就可以了。注意双引号不要删掉。 -Dfile.encoding=utf-8 -Dnative.encoding=utf-8：这两个参数用于指定使用的文本编码，避免控制台日志的中文显示为乱码。 保存文件，将后缀名改为bat，双击运行一次；第一次的运行会自动下载原版的服务端并在它的基础上修改（为了规避版权问题不能直接提供修改好的服务端），需要一些时间。等它下完开始滚动日志后没一会就会报错停止，这是正常的，因为我们还没有同意最终用户许可协议（同样是版权问题）。\n第一次运行\n这时在游戏文件夹里已经生成了一堆文件和文件夹，暂时不管。我们打开eula.txt，把最后一行的false改成true，保存，再次启动服务端，正常运行。\nEULA\n弹出防火墙提示的话记得允许放行。\n防火墙\n这个时候可以看到命令行窗口最后一行日志是Timings reset，并有一个\u003e命令提示符等待用户输入。以后可以从这里输入Minecraft指令了。\n在客户端中填入服务器地址 我们打开游戏，启动多人模式，添加一个服务器为127.0.0.1:25565看看能不能正常进去：\n第一次进入\n打开F3调试选项，左上角可以看到进入了\"Paper\"服务器。\n配置服务端 在控制台输入stop后回车停止服务端。然后打开服务端目录下的server.properties，对服务端进行配置。这里可以参考我的：\n#Minecraft server properties #Mon Jan 16 16:16:38 CST 2023 allow-flight=true allow-nether=true broadcast-console-to-ops=true broadcast-rcon-to-ops=true debug=false difficulty=normal enable-command-block=true enable-jmx-monitoring=false enable-query=false enable-rcon=false enable-status=true enforce-secure-profile=true enforce-whitelist=false entity-broadcast-range-percentage=100 force-gamemode=false function-permission-level=2 gamemode=survival generate-structures=true generator-settings={} hardcore=false hide-online-players=false initial-disabled-packs= initial-enabled-packs=vanilla level-name=world level-seed= level-type=default max-chained-neighbor-updates=1000000 max-players=20 max-tick-time=60000 max-world-size=29999984 motd= network-compression-threshold=256 online-mode=false op-permission-level=4 player-idle-timeout=0 prevent-proxy-connections=false previews-chat=false pvp=true query.port=25565 rate-limit=0 rcon.password= rcon.port=25575 require-resource-pack=false resource-pack= resource-pack-prompt= resource-pack-sha1= server-ip= server-port=25565 simulation-distance=10 spawn-animals=true spawn-monsters=true spawn-npcs=true spawn-protection=16 sync-chunk-writes=true text-filtering-config= use-native-transport=true view-distance=10 white-list=false 对于普通玩家，我们主要关心几个选项：\nserver-port：服务器端口，默认为25565。当使用此端口时其他客户端输入可以省略，但如果冲突的话需要重新设置一个。我推荐设置一个10000~65535的高端口，避免冲突。 view-distance：可视距离，设置的越大性能消耗越高。设置为10（10个区块）就已经够了。 online-mode：是否开启正版验证。如果你的玩家有人在玩盗版（离线验证）就应该关掉。但如果大家玩的都是正版但用的是如HMCL的第三方启动器也建议关掉，因为第三方启动器的登陆状态总有问题，开着的话经常会登不上。 motd：服务器在多人游戏的服务器列表里显示的标题，但是不装插件好像不支持中文。 其他的选项可以在网上找到参考资料，这里就不赘述了。\n写好配置文件后就来到重头戏——如何让别人连接到你？\n让内网用户连接 如果你只是想在家/宿舍/校园网内/公司/实验室里和小伙伴一起玩的话，那么下一篇的内容就不用再看，照本节操作就可以了。反之你可以看看不在同一个网络内，通过公网连接 了解如何让别人远程连接到你的服务器。\n我们前面让Windows防火墙放行了服务端，此时理论上和你在同一个网络内（比如说宿舍或者公司的公用路由器下）的用户就可以直接添加你电脑的IP和端口作为客户端加入游戏了；当然，要填对IP才行。\n在同一个网络内 这里我们启动刚刚写好的启动服务端的脚本，向上滚动命令行窗口旁边的滚动条直到最顶端，看到第二行的命令ipconfig /all产生的输出：\nipconfig\n找到我们正在用的适配器（一般是以太网或者WLAN，会显示得非常详细，这里我把右边的输出全部隐去了）所对应的IPv4地址，那么就是这个了。让其他玩家在他们的客户端中输入这个IP和之前设置的端口，就可以连上了。\n在同一个大局域网（如校园网）内 首先我们需要明确，有些管理严格的学校会禁止校园网内的客户端互相访问，此时你应当跳到下一章按照公网方式连接；但绝大部分学校应该都不会这么做。\n但即使是校园网，不同的联网方式操作起来也有所不同：\n电脑直接接在网线接口上，通过拨号认证上网 这种情况你在上节查看IP地址时应该会列出一个PPPoE适配器，让你的朋友填入那个地址即可。但是只有在同一个校园网的玩家才能这么连。\n电脑直接接在网线接口上，通过网页认证上网 实际上我没有使用过这种认证方式……此时按照上一节查看IP地址的方法，直接填入以太网或WLAN适配器的地址即可。\n电脑连接到路由器，由路由器拨号上网 部分学校允许学生使用路由器拨号。此时你需要设置端口转发或DMZ主机，这里以小米路由器为例：\n打开浏览器登陆到路由器后台（对于小米路由器，一般是http://192.168.31.1），选择高级设置-端口转发，添加规则：\n端口转发\n设置规则\n各个项目的解释如下：\n名称：随意设置即可。 外部端口：可以填25565，也可以填一个你喜欢的，但这样就需要其他玩家连接时输入这个外部端口，而不是上面设置的端口了。 内部IP地址：填你的电脑的内网IP地址，参见『在同一个网络内』一节。 协议：不用改动，设置为默认的TCP就可以。 内部端口：填之前在配置文件里写的端口。 添加后别忘了把页面划到最下面，有个保存并生效的按钮，按了才算成功的。\n然后打开路由器后台的常用设置-上网设置，可以看到上网信息一栏，记下这个IP地址。\n上网信息\n对于校园网内的其他用户，在你设置好端口转发后使用刚刚记下的IP地址和外部端口一般就可以连接到你的服务器了，但如果你的校园网重新拨号导致IP地址变动则需要重新在他们的客户端里填入新的IP，稍微有点麻烦。\n不在同一个网络内，通过公网连接 关于这个部分可能需要单独写一篇，因为有很多不同的方法，并且也适用于其他游戏的局域网联机（大概）。请参见下一篇：教程：如何在服务器上使用内网穿透\n完成！ 现在你已经设置好了，可以愉快地享受游戏了~\n如果还有什么问题的话，可以发邮件同我联系！祝你玩得开心:D\n欲知后事如何，且听下回分解:D\n","wordCount":"3500","inLanguage":"en","image":"https://s.gravatar.com/avatar/ca6b899274fa556db7e5cf9c54325448","datePublished":"2023-03-14T12:53:17+08:00","dateModified":"2023-03-14T12:53:17+08:00","author":{"@type":"Person","name":"lisolaris"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.sorali.org/tutorials/2023/03/howto-set-up-minecraft-server-on-windows/"},"publisher":{"@type":"Organization","name":"lisolaris's blog","logo":{"@type":"ImageObject","url":"https://blog.sorali.org/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.sorali.org/ accesskey=h title="Home (Alt + H)">Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.sorali.org/categories/ title=目录><span>目录</span></a></li><li><a href=https://blog.sorali.org/tags/ title=标签><span>标签</span></a></li><li><a href=https://blog.sorali.org/posts/helloworld/ title=关于><span>关于</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.sorali.org/>Home</a>&nbsp;»&nbsp;<a href=https://blog.sorali.org/tutorials/>Tutorials</a></div><h1 class="post-title entry-hint-parent">教程：如何在Windows机器上架设Minecraft服务器</h1><div class=post-meta><span title='2023-03-14 12:53:17 +0800 CST'>March 14, 2023</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;3500 words&nbsp;·&nbsp;lisolaris&nbsp;|&nbsp;<a href=# rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%87%86%e5%a4%87%e5%b7%a5%e4%bd%9c aria-label=准备工作>准备工作</a></li><li><a href=#%e8%ae%a9%e6%9c%8d%e5%8a%a1%e5%99%a8%e8%b7%91%e8%b5%b7%e6%9d%a5 aria-label=让服务器跑起来>让服务器跑起来</a><ul><li><a href=#%e5%87%86%e5%a4%87%e5%a5%bd%e6%96%87%e4%bb%b6 aria-label=准备好文件>准备好文件</a></li><li><a href=#%e5%90%af%e5%8a%a8%e8%84%9a%e6%9c%ac aria-label=启动脚本>启动脚本</a></li><li><a href=#%e5%9c%a8%e5%ae%a2%e6%88%b7%e7%ab%af%e4%b8%ad%e5%a1%ab%e5%85%a5%e6%9c%8d%e5%8a%a1%e5%99%a8%e5%9c%b0%e5%9d%80 aria-label=在客户端中填入服务器地址>在客户端中填入服务器地址</a></li><li><a href=#%e9%85%8d%e7%bd%ae%e6%9c%8d%e5%8a%a1%e7%ab%af aria-label=配置服务端>配置服务端</a></li></ul></li><li><a href=#%e8%ae%a9%e5%86%85%e7%bd%91%e7%94%a8%e6%88%b7%e8%bf%9e%e6%8e%a5 aria-label=让内网用户连接>让内网用户连接</a><ul><li><a href=#%e5%9c%a8%e5%90%8c%e4%b8%80%e4%b8%aa%e7%bd%91%e7%bb%9c%e5%86%85 aria-label=在同一个网络内>在同一个网络内</a></li><li><a href=#%e5%9c%a8%e5%90%8c%e4%b8%80%e4%b8%aa%e5%a4%a7%e5%b1%80%e5%9f%9f%e7%bd%91%e5%a6%82%e6%a0%a1%e5%9b%ad%e7%bd%91%e5%86%85 aria-label=在同一个大局域网（如校园网）内>在同一个大局域网（如校园网）内</a><ul><li><a href=#%e7%94%b5%e8%84%91%e7%9b%b4%e6%8e%a5%e6%8e%a5%e5%9c%a8%e7%bd%91%e7%ba%bf%e6%8e%a5%e5%8f%a3%e4%b8%8a%e9%80%9a%e8%bf%87%e6%8b%a8%e5%8f%b7%e8%ae%a4%e8%af%81%e4%b8%8a%e7%bd%91 aria-label=电脑直接接在网线接口上，通过拨号认证上网>电脑直接接在网线接口上，通过拨号认证上网</a></li><li><a href=#%e7%94%b5%e8%84%91%e7%9b%b4%e6%8e%a5%e6%8e%a5%e5%9c%a8%e7%bd%91%e7%ba%bf%e6%8e%a5%e5%8f%a3%e4%b8%8a%e9%80%9a%e8%bf%87%e7%bd%91%e9%a1%b5%e8%ae%a4%e8%af%81%e4%b8%8a%e7%bd%91 aria-label=电脑直接接在网线接口上，通过网页认证上网>电脑直接接在网线接口上，通过网页认证上网</a></li><li><a href=#%e7%94%b5%e8%84%91%e8%bf%9e%e6%8e%a5%e5%88%b0%e8%b7%af%e7%94%b1%e5%99%a8%e7%94%b1%e8%b7%af%e7%94%b1%e5%99%a8%e6%8b%a8%e5%8f%b7%e4%b8%8a%e7%bd%91 aria-label=电脑连接到路由器，由路由器拨号上网>电脑连接到路由器，由路由器拨号上网</a></li></ul></li></ul></li><li><a href=#%e4%b8%8d%e5%9c%a8%e5%90%8c%e4%b8%80%e4%b8%aa%e7%bd%91%e7%bb%9c%e5%86%85%e9%80%9a%e8%bf%87%e5%85%ac%e7%bd%91%e8%bf%9e%e6%8e%a5 aria-label=不在同一个网络内，通过公网连接>不在同一个网络内，通过公网连接</a></li><li><a href=#%e5%ae%8c%e6%88%90 aria-label=完成！>完成！</a></li></ul></div></details></div><div class=post-content><p>本篇是应群友需求，来介绍一下如何在Windows机器上启动Minecraft服务端供内网用户游玩，以使用服务端上才能运行的插件之类的。关于如何让别人远程连接到你的服务器，可以参见下一篇<a href=https://blog.sorali.org/2023/03/%E6%95%99%E7%A8%8B%EF%BC%9A%E5%A6%82%E4%BD%95%E5%9C%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E4%BD%BF%E7%94%A8%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/>教程：如何在服务器上使用内网穿透</a>
。</p><h2 id=准备工作>准备工作<a hidden class=anchor aria-hidden=true href=#准备工作>#</a></h2><p>首先呢我们需要准备一个服务端，这里选用<a href=https://papermc.io/>PaperMC</a>，访问官网后点进右上角Downloads按需下载版本就行了。下载后得到的一个jar文件，先放着。</p><figure class=align-center><img loading=lazy src=https://s3.bmp.ovh/imgs/2023/03/14/083a5e19459dc903.png#center alt=下载PaperMC服务端><figcaption><p>下载PaperMC服务端</p></figcaption></figure><p>PaperMC属于Bukkit系的服务端，兼容大部分Bukkit和Spigot的插件，同时应用了许多针对原版的优化，令其运行速度大大快于原版vanilla；但代价就是许多原版的<del>bug</del>特性在Paper端不再可用，需要在高级配置中开启或是安装额外的插件（比如用于造刷沙机的跨世界实体方块更新逻辑在Paper端就需要安装<a href=https://github.com/Nats-ji/paper-sand-dupe-unpatched>这个插件</a>）。</p><p>需要注意的是官网首页的版本是跟进到最新稳定版的，比如目前是1.19.3，那么1.19.2等不再支持的客户端需要一直往下滑点击More才能看到。此外，更旧的不再支持的大版本服务端（如1.18.2及更早）被归在Legacy里面，点进去后会提示这些版本不再受支持，你提出的任何bug都不会修补云云。</p><p>为了让游戏运行起来，我们还需要Java运行环境。你可以下载<a href=https://jdk.java.net/19/>OpenJDK</a>或是<a href=https://www.oracle.com/java/technologies/downloads>Oracle JDK</a>，二者的区别在开源与否。</p><p>此外，从Minecraft 1.17开始，Mojang就要求玩家使用16及更高版本的JRE，因此我推荐你下载最新的JDK。从我个人的使用体验而言，OpenJDK和Oracle JDK并没有察觉到明显的差异，下载哪个都无所谓了……不过我推荐下载zip打包的JDK，可以省去配置环境变量这一步，后续要升级也很方便。</p><figure class=align-center><img loading=lazy src=https://s3.bmp.ovh/imgs/2023/03/14/d790612a511af346.png#center alt="OpenJDK Windows版下载"><figcaption><p>OpenJDK Windows版下载</p></figcaption></figure><h2 id=让服务器跑起来>让服务器跑起来<a hidden class=anchor aria-hidden=true href=#让服务器跑起来>#</a></h2><h3 id=准备好文件>准备好文件<a hidden class=anchor aria-hidden=true href=#准备好文件>#</a></h3><p>现在我们就有了一个.zip的JDK压缩包，一个.jar的Java软件包。我们找个文件夹把它们装起来，解压JDK，看起来像是这样的：</p><figure class=align-center><img loading=lazy src=https://s3.bmp.ovh/imgs/2023/03/14/04cae75d09bef35d.png#center alt=文件列表><figcaption><p>文件列表</p></figcaption></figure><p>打开得到的jdk文件夹，进入bin目录内，找到java.exe，<strong>按住Shift的同时右键它</strong>，在弹出的菜单中选择『复制文件地址』：</p><figure class=align-center><img loading=lazy src=https://s3.bmp.ovh/imgs/2023/03/14/6895b0ce3da56561.png#center alt=复制文件地址><figcaption><p>复制文件地址</p></figcaption></figure><p>如果想运行安装了Forge或者Fabric的Mod服务器，之后我有空会再补充的。这里先介绍原版。</p><h3 id=启动脚本>启动脚本<a hidden class=anchor aria-hidden=true href=#启动脚本>#</a></h3><p>回到刚刚的目录，新建一个文本文档，填入刚刚复制的java.exe的文件地址，在后面加入参数<code>-Xmx&lt;最大限制内存>M -Xms&lt;最小分配内存>M -Dfile.encoding=utf-8 -Dnative.encoding=utf-8 -jar &lt;服务端文件路径></code>，比如像这样：</p><pre><code class=language-Windows>chcp 65001
ipconfig /all
&quot;D:\MinecraftServer\jdk-19.0.2\bin\java.exe&quot; -Xmx4096M -Xms768M -Dfile.encoding=utf-8 -Dnative.encoding=utf-8 -jar &quot;D:\MinecraftServer\paper-1.19.3-448.jar&quot;
pause
</code></pre><p>解释一下：</p><blockquote><ul><li>最大限制内存：允许Java虚拟机使用的最大的内存，可以理解为服务端使用的最大内存量。应当按照你电脑拥有的实际内存来设置。一般有16G内存的电脑，和三五个好友一起玩设置为4096(4GB)已经够用了，人数更多可酌情调整，但也需要更强的CPU性能。</li><li>最小分配内存：至少给Java虚拟机分配这么多内存，合理小于最大限制就可以了。</li><li>服务端文件路径：可以用和复制java.exe的文件路径相同的方法得到，粘贴进去就可以了。注意双引号不要删掉。</li><li><code>-Dfile.encoding=utf-8 -Dnative.encoding=utf-8</code>：这两个参数用于指定使用的文本编码，避免控制台日志的中文显示为乱码。</li></ul></blockquote><p>保存文件，将后缀名改为bat，双击运行一次；第一次的运行会自动下载原版的服务端并在它的基础上修改（为了规避版权问题不能直接提供修改好的服务端），需要一些时间。等它下完开始滚动日志后没一会就会报错停止，这是正常的，因为我们还没有同意最终用户许可协议（同样是版权问题）。</p><figure class=align-center><img loading=lazy src=https://s3.bmp.ovh/imgs/2023/03/14/aa08d529a007c044.png#center alt=第一次运行><figcaption><p>第一次运行</p></figcaption></figure><p>这时在游戏文件夹里已经生成了一堆文件和文件夹，暂时不管。我们打开eula.txt，把最后一行的<code>false</code>改成<code>true</code>，保存，再次启动服务端，正常运行。</p><figure class=align-center><img loading=lazy src=https://s3.bmp.ovh/imgs/2023/03/14/e39bf04e4bf76753.png#center alt=EULA><figcaption><p>EULA</p></figcaption></figure><p>弹出防火墙提示的话记得允许放行。</p><figure class=align-center><img loading=lazy src=https://s3.bmp.ovh/imgs/2023/03/14/26dfa7f3cd600c9d.png#center alt=防火墙><figcaption><p>防火墙</p></figcaption></figure><p>这个时候可以看到命令行窗口最后一行日志是<code>Timings reset</code>，并有一个<code>></code>命令提示符等待用户输入。以后可以从这里输入Minecraft指令了。</p><h3 id=在客户端中填入服务器地址>在客户端中填入服务器地址<a hidden class=anchor aria-hidden=true href=#在客户端中填入服务器地址>#</a></h3><p>我们打开游戏，启动多人模式，添加一个服务器为<code>127.0.0.1:25565</code>看看能不能正常进去：</p><figure class=align-center><img loading=lazy src=https://s3.bmp.ovh/imgs/2023/03/14/4d11790f64c060ff.png#center alt=第一次进入><figcaption><p>第一次进入</p></figcaption></figure><p>打开F3调试选项，左上角可以看到进入了"Paper"服务器。</p><h3 id=配置服务端>配置服务端<a hidden class=anchor aria-hidden=true href=#配置服务端>#</a></h3><p>在控制台输入<code>stop</code>后回车停止服务端。然后打开服务端目录下的server.properties，对服务端进行配置。这里可以参考我的：</p><pre><code class=language-ini>#Minecraft server properties
#Mon Jan 16 16:16:38 CST 2023
allow-flight=true
allow-nether=true
broadcast-console-to-ops=true
broadcast-rcon-to-ops=true
debug=false
difficulty=normal
enable-command-block=true
enable-jmx-monitoring=false
enable-query=false
enable-rcon=false
enable-status=true
enforce-secure-profile=true
enforce-whitelist=false
entity-broadcast-range-percentage=100
force-gamemode=false
function-permission-level=2
gamemode=survival
generate-structures=true
generator-settings={}
hardcore=false
hide-online-players=false
initial-disabled-packs=
initial-enabled-packs=vanilla
level-name=world
level-seed=
level-type=default
max-chained-neighbor-updates=1000000
max-players=20
max-tick-time=60000
max-world-size=29999984
motd=
network-compression-threshold=256
online-mode=false
op-permission-level=4
player-idle-timeout=0
prevent-proxy-connections=false
previews-chat=false
pvp=true
query.port=25565
rate-limit=0
rcon.password=
rcon.port=25575
require-resource-pack=false
resource-pack=
resource-pack-prompt=
resource-pack-sha1=
server-ip=
server-port=25565
simulation-distance=10
spawn-animals=true
spawn-monsters=true
spawn-npcs=true
spawn-protection=16
sync-chunk-writes=true
text-filtering-config=
use-native-transport=true
view-distance=10
white-list=false
</code></pre><p>对于普通玩家，我们主要关心几个选项：</p><blockquote><ul><li><code>server-port</code>：服务器端口，默认为25565。当使用此端口时其他客户端输入可以省略，但如果冲突的话需要重新设置一个。我推荐设置一个10000~65535的高端口，避免冲突。</li><li><code>view-distance</code>：可视距离，设置的越大性能消耗越高。设置为10（10个区块）就已经够了。</li><li><code>online-mode</code>：是否开启正版验证。如果你的玩家有人在玩盗版（离线验证）就应该关掉。但如果大家玩的都是正版但用的是如HMCL的第三方启动器也建议关掉，因为第三方启动器的登陆状态总有问题，开着的话经常会登不上。</li><li><code>motd</code>：服务器在多人游戏的服务器列表里显示的标题，但是不装插件好像不支持中文。</li></ul></blockquote><p>其他的选项可以在网上找到参考资料，这里就不赘述了。</p><p>写好配置文件后就来到重头戏——如何让别人连接到你？</p><h2 id=让内网用户连接>让内网用户连接<a hidden class=anchor aria-hidden=true href=#让内网用户连接>#</a></h2><p>如果你只是想在家/宿舍/校园网内/<del>公司/实验室</del>里和小伙伴一起玩的话，那么下一篇的内容就不用再看，照本节操作就可以了。反之你可以看看<a href=https://blog.sorali.org/2023/03/%E6%95%99%E7%A8%8B%E5%A6%82%E4%BD%95%E5%9C%A8windows%E6%9C%BA%E5%99%A8%E4%B8%8A%E6%9E%B6%E8%AE%BEminecraft%E6%9C%8D%E5%8A%A1%E5%99%A8/#%E4%B8%8D%E5%9C%A8%E5%90%8C%E4%B8%80%E4%B8%AA%E7%BD%91%E7%BB%9C%E5%86%85%E9%80%9A%E8%BF%87%E5%85%AC%E7%BD%91%E8%BF%9E%E6%8E%A5>不在同一个网络内，通过公网连接</a>
了解如何让别人远程连接到你的服务器。</p><p>我们前面让Windows防火墙放行了服务端，此时理论上和你在同一个网络内（比如说宿舍或者公司的公用路由器下）的用户就可以直接添加你电脑的IP和端口作为客户端加入游戏了；当然，要填对IP才行。</p><h3 id=在同一个网络内>在同一个网络内<a hidden class=anchor aria-hidden=true href=#在同一个网络内>#</a></h3><p>这里我们启动刚刚写好的启动服务端的脚本，向上滚动命令行窗口旁边的滚动条直到最顶端，看到第二行的命令<code>ipconfig /all</code>产生的输出：</p><figure class=align-center><img loading=lazy src=https://s3.bmp.ovh/imgs/2023/03/14/119cbbaee405462f.png#center alt=ipconfig><figcaption><p>ipconfig</p></figcaption></figure><p>找到我们正在用的适配器（一般是以太网或者WLAN，会显示得非常详细，这里我把右边的输出全部隐去了）所对应的IPv4地址，那么就是这个了。让其他玩家在他们的客户端中输入这个IP和之前设置的端口，就可以连上了。</p><h3 id=在同一个大局域网如校园网内>在同一个大局域网（如校园网）内<a hidden class=anchor aria-hidden=true href=#在同一个大局域网如校园网内>#</a></h3><p>首先我们需要明确，有些管理严格的学校会禁止校园网内的客户端互相访问，此时你应当跳到下一章按照公网方式连接；但绝大部分学校应该都不会这么做。</p><p>但即使是校园网，不同的联网方式操作起来也有所不同：</p><h4 id=电脑直接接在网线接口上通过拨号认证上网>电脑直接接在网线接口上，通过拨号认证上网<a hidden class=anchor aria-hidden=true href=#电脑直接接在网线接口上通过拨号认证上网>#</a></h4><p>这种情况你在上节查看IP地址时应该会列出一个PPPoE适配器，让你的朋友填入那个地址即可。但是只有在同一个校园网的玩家才能这么连。</p><h4 id=电脑直接接在网线接口上通过网页认证上网>电脑直接接在网线接口上，通过网页认证上网<a hidden class=anchor aria-hidden=true href=#电脑直接接在网线接口上通过网页认证上网>#</a></h4><p>实际上我没有使用过这种认证方式……此时按照上一节查看IP地址的方法，直接填入以太网或WLAN适配器的地址即可。</p><h4 id=电脑连接到路由器由路由器拨号上网>电脑连接到路由器，由路由器拨号上网<a hidden class=anchor aria-hidden=true href=#电脑连接到路由器由路由器拨号上网>#</a></h4><p>部分学校允许学生使用路由器拨号。此时你需要设置端口转发或DMZ主机，这里以小米路由器为例：</p><p>打开浏览器登陆到路由器后台（对于小米路由器，一般是<a href=http://192.168.31.1>http://192.168.31.1</a>），选择高级设置-端口转发，添加规则：</p><figure class=align-center><img loading=lazy src=https://s3.bmp.ovh/imgs/2023/03/14/6c8363ca429d2e30.png#center alt=端口转发><figcaption><p>端口转发</p></figcaption></figure><figure class=align-center><img loading=lazy src=https://s3.bmp.ovh/imgs/2023/03/14/81a30ec78ecb1486.png#center alt=设置规则><figcaption><p>设置规则</p></figcaption></figure><p>各个项目的解释如下：</p><blockquote><ul><li>名称：随意设置即可。</li><li>外部端口：可以填25565，也可以填一个你喜欢的，但这样就需要其他玩家连接时输入这个外部端口，而不是上面设置的端口了。</li><li>内部IP地址：填你的电脑的内网IP地址，参见『在同一个网络内』一节。</li><li>协议：不用改动，设置为默认的TCP就可以。</li><li>内部端口：填之前在配置文件里写的端口。</li></ul></blockquote><p>添加后别忘了把页面划到最下面，有个保存并生效的按钮，按了才算成功的。</p><p>然后打开路由器后台的常用设置-上网设置，可以看到上网信息一栏，记下这个IP地址。</p><figure class=align-center><img loading=lazy src=https://s3.bmp.ovh/imgs/2023/03/14/142975bf2873d1a8.png#center alt=上网信息><figcaption><p>上网信息</p></figcaption></figure><p>对于校园网内的其他用户，在你设置好端口转发后使用刚刚记下的IP地址和外部端口一般就可以连接到你的服务器了，但如果你的校园网重新拨号导致IP地址变动则需要重新在他们的客户端里填入新的IP，稍微有点麻烦。</p><h2 id=不在同一个网络内通过公网连接>不在同一个网络内，通过公网连接<a hidden class=anchor aria-hidden=true href=#不在同一个网络内通过公网连接>#</a></h2><p>关于这个部分可能需要单独写一篇，因为有很多不同的方法，并且也适用于其他游戏的局域网联机（大概）。请参见下一篇：<a href=https://blog.sorali.org/2023/03/%E6%95%99%E7%A8%8B%EF%BC%9A%E5%A6%82%E4%BD%95%E5%9C%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E4%BD%BF%E7%94%A8%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/>教程：如何在服务器上使用内网穿透</a></p><h2 id=完成>完成！<a hidden class=anchor aria-hidden=true href=#完成>#</a></h2><p>现在你已经设置好了，可以愉快地享受游戏了~</p><p>如果还有什么问题的话，可以<a href=mailto:sorali@sorali.org>发邮件</a>同我联系！祝你玩得开心:D</p><p>欲知后事如何，且听下回分解:D</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.sorali.org/tags/2023-03/>2023-03</a></li><li><a href=https://blog.sorali.org/tags/%E6%95%99%E7%A8%8B/>教程</a></li><li><a href=https://blog.sorali.org/tags/minecraft/>Minecraft</a></li></ul><nav class=paginav><a class=prev href=https://blog.sorali.org/tutorials/2023/03/howto-using-intranet-passing-on-server/><span class=title>« Prev</span><br><span>教程：如何在服务器上使用内网穿透</span>
</a><a class=next href=https://blog.sorali.org/articles/2023/03/helloworld/><span class=title>Next »</span><br><span>Hello World</span></a></nav></footer></article></main><div class=giscus></div><footer class=footer><span>&copy; 2025 <a href=https://blog.sorali.org/>lisolaris's blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script id=giscus-script src=https://giscus.app/client.js data-repo=lisolaris/lisolaris.github.io data-repo-id=R_kgDOI1UN9A data-category=Announcements data-category-id=DIC_kwDOI1UN9M4CoQUt data-mapping=title data-strict=1 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=noborder_light data-lang=zh-CN data-loading=lazy crossorigin=anonymous async></script><script>(function(){let e=document.querySelector("footer.footer");e.insertAdjacentHTML("beforeend","<br>"),e.insertAdjacentHTML("beforeend",'<a href="https://icp.gov.moe/?keyword=20251096" target="_blank">萌ICP备20251096号</a>'),document.querySelector("div.post-meta a").addEventListener("click",function(){document.querySelector("footer.footer").scrollIntoView({behavior:"smooth"})})})()</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>
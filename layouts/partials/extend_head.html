{{ if or .Params.math .Site.Params.math }}
<!-- Enable KaTeX math render -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css" integrity="sha512-fHwaWebuwA7NSF5Qg/af4UeDx9XqUpYpOGgubo3yWu+b2IQR4UeQwbb42Ti7gVAjNtVoI/I9TEoYeu9omwcC6g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.js" integrity="sha512-LQNxIMR5rXv7o+b1l8+N1EZMfhG7iFZ9HhnbJkTp4zjNr5Wvst75AqUeFDxeRUa7l5vEDyUiAip//r+EFLLCyA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/contrib/auto-render.min.js" integrity="sha512-iWiuBS5nt6r60fCz26Nd0Zqe0nbk1ZTIQbl3Kv7kYsX+yKMUFHzjaH2+AnM6vp2Xs+gNmaBAVWJjSmuPw76Efg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    onload="renderMathInElement(document.body);"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
            delimiters: [
                {left: "$$", right: "$$", display: true},
                {left: "$", right: "$", display: false}
            ],
            macros: {
                // "\\zeta": "\\mathord{\\text{Î¶}}"
            }
        });
    });
</script>
<!-- <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=STIX+Two+Math&display=swap"> -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/stixfonts/css/stix.css">
<style>
.katex .mathnormal {
    font-family: "STIXGeneral", "STIX Math", "STIX Two Math", "Times New Roman", serif !important;
}
</style>
{{ end }}

{{if site.Params.useExternalHLJS}}
<!-- Enable highlight.js code syntax highlighter -->
<link id="hljs-theme" rel="stylesheet" href=""/>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js" integrity="sha512-EBLzUL8XLl+va/zAsmXwS7Z2B1F9HUHkZwyS/VKwh3S7T/U0nF4BaU29EP/ZSf6zgiIxYAnKLu6bJ8dqpmX5uw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
    document.addEventListener("DOMContentLoaded", function(){
        function SelectThemeAndRefresh(){
            for (let pre of document.getElementsByTagName("pre")){
                pre.querySelector("code").classList.remove("hljs");
                pre.querySelector("code").removeAttribute("data-highlighted");
            }
            let theme = document.body.classList.contains("dark") ? "dark" : "light";
            document.getElementById("hljs-theme").href = `https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/atom-one-${theme}.min.css`;
            hljs.highlightAll();
        }
        SelectThemeAndRefresh();
        const hljsObserver = new MutationObserver(mutations => {
            mutations.forEach(mutation => {
                if (mutation.attributeName === "class"){
                    SelectThemeAndRefresh();
                }
            });
        });
        hljsObserver.observe(document.body, {attributes: true, attributeFilter: ["class"]});
    });
</script>
{{end}}
